CREATE DATABASE INSTITUICAO;

USE INSTITUICAO;

CREATE TABLE ESCOLAS(
ESCOLAID INT PRIMARY KEY AUTO_INCREMENT,
NOMEESCOLA VARCHAR(255)  NOT NULL,
ENDERECO VARCHAR(255) NOT NULL,
TELEFONE VARCHAR(12) NOT NULL 
);

CREATE TABLE ALUNOS(
MATRICULA INT PRIMARY KEY AUTO_INCREMENT,
NOMEALUNO VARCHAR(255) NOT NULL,
DATANASCIMENTO DATE,
ENDERECO VARCHAR(255) NOT NULL,
TELEFONE VARCHAR(12) NOT NULL,
ESCOLAID INT,
FOREIGN KEY (ESCOLAID) REFERENCES ESCOLAS(ESCOLAID)
);

INSERT INTO ESCOLAS(NOMEESCOLA, ENDERECO, TELEFONE) VALUES
('Adventista de Itapagipe', 'Roma', '7191234-6548'),
('Adventista de Castelo branco', 'Castelo Branco', '7194657-6548'),
('Adventista de Paripe', 'Paripe', '7199874-6548'),
('Adventista de Salvador', 'Centro', '7191594-6548'),
('Adventista de Lauro', 'Lauro de Freitas', '7197562-6548');

INSERT INTO ALUNOS(NOMEALUNO, DATANASCIMENTO, ENDERECO, TELEFONE, ESCOLAID) VALUES
('PEDRO','2002-02-14','RUA DO MANGUEZAL','7198456-2154',1),
('MARIA','2003-05-20','AVENIDA DAS FLORES','7199321-4567',2),
('JO√ÉO','2002-08-10','RUA DAS PALMEIRAS','7197654-1234',3),
('ANA','2004-03-30','RUA DAS ROSAS','7198789-9876',4),
('MARCOS','2003-11-15','AVENIDA DO SOL','7196210-7890',5);

SELECT e.NOMEESCOLA, COUNT(a.MATRICULA) AS NUMERODEALUNOS
FROM ESCOLAS e
LEFT JOIN ALUNOS a ON e.ESCOLAID = a.ESCOLAID
GROUP BY e.ESCOLAID;
